{"ast":null,"code":"import _slicedToArray from\"/var/projets/broglie-social-react/sociala-react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/var/projets/broglie-social-react/sociala-react/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import*as React from\"react\";import{Formik,Form}from\"formik\";import FormContent from\"./ContactUsDialogForm\";import{Dialog}from\"@reach/dialog\";import\"@reach/dialog/styles.css\";import axios from\"axios\";import{ToastContainer,toast}from\"react-toastify\";import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Context=/*#__PURE__*/React.createContext();export var useContactUsDialog=function useContactUsDialog(){return React.useContext(Context);};var initalState={isOpen:false,node:null};var initialValues={name:\"\",email:\"\",message:\"\"};function reducer(state,_ref){var type=_ref.type,payload=_ref.payload;switch(type){case\"open\":{return _objectSpread(_objectSpread({},state),{},{isOpen:true,node:payload});}case\"close\":{return{isOpen:false,node:null};}default:throw new Error(\"invalid action type '\".concat(type,\"'\"));}}export default function(props){var _React$useReducer=React.useReducer(reducer,initalState),_React$useReducer2=_slicedToArray(_React$useReducer,2),state=_React$useReducer2[0],dispatch=_React$useReducer2[1];var value=React.useMemo(function(){return{openContactUs:function openContactUs(node){dispatch({type:\"open\",payload:node});}};},[]);var handleSubmit=React.useCallback(function(values){var _state$node;axios.get(\"//sherut-leumi.co.il/datiot/ddmail.aspx?sendername=\".concat(values.name,\"&senderemail=\").concat(values.email,\"&personname=\").concat((state===null||state===void 0?void 0:(_state$node=state.node)===null||_state$node===void 0?void 0:_state$node.name)||\"\",\"&message=\").concat(values.message)).then(function(){dispatch({type:\"close\"});toast(\"תודה\");}).catch(function(e){console.log(e);});},[state]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Context.Provider,_objectSpread(_objectSpread({},props),{},{value:value})),/*#__PURE__*/_jsx(Dialog,{isOpen:state.isOpen,onDismiss:function onDismiss(){return dispatch({type:\"close\"});},children:/*#__PURE__*/_jsx(Formik,{initialValues:initialValues,onSubmit:handleSubmit,children:function children(){return/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsx(FormContent,{node:state.node})});}})}),/*#__PURE__*/_jsx(ToastContainer,{autoClose:4000})]});}","map":{"version":3,"sources":["/var/projets/broglie-social-react/sociala-react/src/components/Familytree/ContactUsDialog.js"],"names":["React","Formik","Form","FormContent","Dialog","axios","ToastContainer","toast","Context","createContext","useContactUsDialog","useContext","initalState","isOpen","node","initialValues","name","email","message","reducer","state","type","payload","Error","props","useReducer","dispatch","value","useMemo","openContactUs","handleSubmit","useCallback","values","get","then","catch","e","console","log"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { Formik, Form } from \"formik\";\nimport FormContent from \"./ContactUsDialogForm\";\nimport { Dialog } from \"@reach/dialog\";\nimport \"@reach/dialog/styles.css\";\nimport axios from \"axios\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst Context = React.createContext();\n\nexport const useContactUsDialog = () => React.useContext(Context);\n\nconst initalState = {\n  isOpen: false,\n  node: null\n};\n\nconst initialValues = {\n  name: \"\",\n  email: \"\",\n  message: \"\"\n};\n\nfunction reducer(state, { type, payload }) {\n  switch (type) {\n    case \"open\": {\n      return {\n        ...state,\n        isOpen: true,\n        node: payload\n      };\n    }\n\n    case \"close\": {\n      return {\n        isOpen: false,\n        node: null\n      };\n    }\n\n    default:\n      throw new Error(`invalid action type '${type}'`);\n  }\n}\n\nexport default function(props) {\n  const [state, dispatch] = React.useReducer(reducer, initalState);\n\n  const value = React.useMemo(() => {\n    return {\n      openContactUs(node) {\n        dispatch({ type: \"open\", payload: node });\n      }\n    };\n  }, []);\n\n  const handleSubmit = React.useCallback(\n    values => {\n      axios\n        .get(\n          `//sherut-leumi.co.il/datiot/ddmail.aspx?sendername=${\n            values.name\n          }&senderemail=${values.email}&personname=${state?.node?.name ||\n            \"\"}&message=${values.message}`\n        )\n        .then(() => {\n          dispatch({ type: \"close\" });\n          toast(\"תודה\");\n        })\n        .catch(e => {\n          console.log(e);\n        });\n    },\n    [state]\n  );\n\n  return (\n    <>\n      <Context.Provider {...props} value={value} />\n      <Dialog\n        isOpen={state.isOpen}\n        onDismiss={() => dispatch({ type: \"close\" })}\n      >\n        <Formik initialValues={initialValues} onSubmit={handleSubmit}>\n          {() => (\n            <Form>\n              <FormContent node={state.node} />\n            </Form>\n          )}\n        </Formik>\n      </Dialog>\n      <ToastContainer autoClose={4000} />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}