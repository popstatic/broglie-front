{"ast":null,"code":"import { FamilyType } from '../types';\nimport { min, prop } from './index';\nimport { withType } from './family';\nimport { getUnitX } from './units';\n\nvar alignGenerations = function alignGenerations(families, root) {\n  var parents = families.find(function (family) {\n    return family.cid === root.id;\n  });\n\n  if (parents) {\n    var shift = getUnitX(parents, parents.children[0]) - getUnitX(root, root.parents[0]);\n    families.filter(withType(FamilyType.child, FamilyType.root)).forEach(function (family) {\n      return family.X += shift;\n    });\n  }\n};\n\nvar correct = function correct(families, coordinate) {\n  var shift = min(families.map(prop(coordinate))) * -1;\n  if (shift !== 0) families.forEach(function (family) {\n    return family[coordinate] += shift;\n  });\n};\n\nexport var correctPositions = function correctPositions(store) {\n  var families = store.familiesArray;\n  alignGenerations(families, store.rootFamily);\n  correct(families, 'Y');\n  correct(families, 'X');\n  return store;\n};","map":{"version":3,"sources":["/var/projets/broglie-social-react/sociala-react/node_modules/relatives-tree/lib/utils/correctPositions.js"],"names":["FamilyType","min","prop","withType","getUnitX","alignGenerations","families","root","parents","find","family","cid","id","shift","children","filter","child","forEach","X","correct","coordinate","map","correctPositions","store","familiesArray","rootFamily"],"mappings":"AAAA,SAASA,UAAT,QAA2B,UAA3B;AACA,SAASC,GAAT,EAAcC,IAAd,QAA0B,SAA1B;AACA,SAASC,QAAT,QAAyB,UAAzB;AACA,SAASC,QAAT,QAAyB,SAAzB;;AACA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,QAAD,EAAWC,IAAX,EAAoB;AACzC,MAAMC,OAAO,GAAGF,QAAQ,CAACG,IAAT,CAAc,UAAAC,MAAM;AAAA,WAAIA,MAAM,CAACC,GAAP,KAAeJ,IAAI,CAACK,EAAxB;AAAA,GAApB,CAAhB;;AACA,MAAIJ,OAAJ,EAAa;AACT,QAAMK,KAAK,GAAIT,QAAQ,CAACI,OAAD,EAAUA,OAAO,CAACM,QAAR,CAAiB,CAAjB,CAAV,CAAR,GACXV,QAAQ,CAACG,IAAD,EAAOA,IAAI,CAACC,OAAL,CAAa,CAAb,CAAP,CADZ;AAEAF,IAAAA,QAAQ,CACHS,MADL,CACYZ,QAAQ,CAACH,UAAU,CAACgB,KAAZ,EAAmBhB,UAAU,CAACO,IAA9B,CADpB,EAEKU,OAFL,CAEa,UAAAP,MAAM;AAAA,aAAIA,MAAM,CAACQ,CAAP,IAAYL,KAAhB;AAAA,KAFnB;AAGH;AACJ,CATD;;AAUA,IAAMM,OAAO,GAAG,SAAVA,OAAU,CAACb,QAAD,EAAWc,UAAX,EAA0B;AACtC,MAAMP,KAAK,GAAGZ,GAAG,CAACK,QAAQ,CAACe,GAAT,CAAanB,IAAI,CAACkB,UAAD,CAAjB,CAAD,CAAH,GAAsC,CAAC,CAArD;AACA,MAAIP,KAAK,KAAK,CAAd,EACIP,QAAQ,CAACW,OAAT,CAAiB,UAAAP,MAAM;AAAA,WAAIA,MAAM,CAACU,UAAD,CAAN,IAAsBP,KAA1B;AAAA,GAAvB;AACP,CAJD;;AAKA,OAAO,IAAMS,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,KAAD,EAAW;AACvC,MAAMjB,QAAQ,GAAGiB,KAAK,CAACC,aAAvB;AACAnB,EAAAA,gBAAgB,CAACC,QAAD,EAAWiB,KAAK,CAACE,UAAjB,CAAhB;AACAN,EAAAA,OAAO,CAACb,QAAD,EAAW,GAAX,CAAP;AACAa,EAAAA,OAAO,CAACb,QAAD,EAAW,GAAX,CAAP;AACA,SAAOiB,KAAP;AACH,CANM","sourcesContent":["import { FamilyType } from '../types';\nimport { min, prop } from './index';\nimport { withType } from './family';\nimport { getUnitX } from './units';\nconst alignGenerations = (families, root) => {\n    const parents = families.find(family => family.cid === root.id);\n    if (parents) {\n        const shift = (getUnitX(parents, parents.children[0]) -\n            getUnitX(root, root.parents[0]));\n        families\n            .filter(withType(FamilyType.child, FamilyType.root))\n            .forEach(family => family.X += shift);\n    }\n};\nconst correct = (families, coordinate) => {\n    const shift = min(families.map(prop(coordinate))) * -1;\n    if (shift !== 0)\n        families.forEach(family => family[coordinate] += shift);\n};\nexport const correctPositions = (store) => {\n    const families = store.familiesArray;\n    alignGenerations(families, store.rootFamily);\n    correct(families, 'Y');\n    correct(families, 'X');\n    return store;\n};\n"]},"metadata":{},"sourceType":"module"}