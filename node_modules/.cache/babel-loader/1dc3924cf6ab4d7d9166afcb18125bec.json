{"ast":null,"code":"import _objectSpread from\"/var/projets/broglie-social-react/sociala-react/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/var/projets/broglie-social-react/sociala-react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import ReactImageFallback from\"react-image-fallback\";import Lightbox from\"react-image-lightbox\";import\"react-image-lightbox/style.css\";import styles from\"./DialogDocs.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function(_ref){var _images;var node=_ref.node;var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),selectedIndex=_React$useState2[0],setSelectedIndex=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),lightboxIsOpen=_React$useState4[0],setLightboxIsOpen=_React$useState4[1];var toggleLightbox=React.useCallback(function(){return setLightboxIsOpen(function(s){return!s;});},[]);var _React$useMemo=React.useMemo(function(){if(!(node===null||node===void 0?void 0:node.docs)){return{images:[],links:[]};}return node.docs.reduce(function(acc,doc){if(doc.img){acc.images.push(_objectSpread(_objectSpread({},doc),{},{caption:doc.desc,source:\"http://digisoft.co.il/docs/\".concat(doc.img)}));}else{acc.links.push(doc);}return acc;},{images:[],links:[]});},[node]),images=_React$useMemo.images,links=_React$useMemo.links;if(!(node===null||node===void 0?void 0:node.docs)){return null;}return/*#__PURE__*/_jsxs(_Fragment,{children:[images?/*#__PURE__*/_jsxs(\"div\",{className:styles.gallery,children:[/*#__PURE__*/_jsx(\"div\",{children:\" \\u05DE\\u05E1\\u05DE\\u05DB\\u05D9\\u05DD:\"}),images.map(function(doc,index){return/*#__PURE__*/_jsx(\"div\",{className:styles.image,ס:true,onClick:function onClick(){setSelectedIndex(index);setLightboxIsOpen(true);},children:/*#__PURE__*/_jsx(ReactImageFallback,{src:doc.source})},index);})]}):null,links.length?/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u05E7\\u05D9\\u05E9\\u05D5\\u05E8\\u05D9\\u05DD:\",links.map(function(link){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"a\",{target:\"_blank\",rel:\"noopener noreferrer\",href:link.link,children:link.title})});})]}):null,lightboxIsOpen&&/*#__PURE__*/_jsx(\"div\",{className:styles.lightbox,children:/*#__PURE__*/_jsx(Lightbox,{wrapperClassName:\" \".concat(styles.lightbox,\" \"),imageTitle:images[selectedIndex].title,imageCaption:function(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:images[selectedIndex].desc}}),images[selectedIndex].link?/*#__PURE__*/_jsx(\"a\",{href:images[selectedIndex].link,target:\"_blank\",rel:\"noopener noreferrer\",children:\"\\u05DE\\u05E7\\u05D5\\u05E8\"}):null]});}(),mainSrc:images[selectedIndex].source,nextSrc:images[(selectedIndex+1)%images.length].source,prevSrc:(_images=images[(selectedIndex+images.length-1)%images.length])===null||_images===void 0?void 0:_images.source,onCloseRequest:toggleLightbox,onMovePrevRequest:function onMovePrevRequest(){return setSelectedIndex((selectedIndex+images.length-1)%images.length);},onMoveNextRequest:function onMoveNextRequest(){return setSelectedIndex((selectedIndex+1)%images.length);}})})]});}","map":{"version":3,"sources":["/var/projets/broglie-social-react/sociala-react/src/components/Familytree/DialogDocs.js"],"names":["React","ReactImageFallback","Lightbox","styles","node","useState","selectedIndex","setSelectedIndex","lightboxIsOpen","setLightboxIsOpen","toggleLightbox","useCallback","s","useMemo","docs","images","links","reduce","acc","doc","img","push","caption","desc","source","gallery","map","index","image","length","link","title","lightbox","__html"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactImageFallback from \"react-image-fallback\";\nimport Lightbox from \"react-image-lightbox\";\nimport \"react-image-lightbox/style.css\";\nimport styles from \"./DialogDocs.module.css\";\n\nexport default function({ node }) {\n  const [selectedIndex, setSelectedIndex] = React.useState(null);\n  const [lightboxIsOpen, setLightboxIsOpen] = React.useState(false);\n\n  const toggleLightbox = React.useCallback(\n    () => setLightboxIsOpen(s => !s),\n    []\n  );\n\n  const { images, links } = React.useMemo(() => {\n    if (!node?.docs) {\n      return { images: [], links: [] };\n    }\n\n    return node.docs.reduce(\n      (acc, doc) => {\n        if (doc.img) {\n          acc.images.push({\n            ...doc,\n            caption: doc.desc,\n            source: `http://digisoft.co.il/docs/${doc.img}`\n          });\n        } else {\n          acc.links.push(doc);\n        }\n\n        return acc;\n      },\n      { images: [], links: [] }\n    );\n  }, [node]);\n\n  if (!node?.docs) {\n    return null;\n  }\n\n  return (\n    <>\n      {images ? (\n        <div className={styles.gallery}>\n          <div> מסמכים:</div>\n          {images.map((doc, index) => (\n            <div\n              className={styles.image}\n              key={index}\n              ס\n              onClick={() => {\n                setSelectedIndex(index);\n                setLightboxIsOpen(true);\n              }}\n            >\n              <ReactImageFallback src={doc.source} />\n            </div>\n          ))}\n        </div>\n      ) : null}\n\n      {links.length ? (\n        <div>\n          קישורים:\n          {links.map(link => (\n            <div>\n              <a target=\"_blank\" rel=\"noopener noreferrer\" href={link.link}>\n                {link.title}\n              </a>\n            </div>\n          ))}\n        </div>\n      ) : null}\n\n      {lightboxIsOpen && (\n        <div className={styles.lightbox}>\n          <Lightbox\n            wrapperClassName={` ${styles.lightbox} `}\n            imageTitle={images[selectedIndex].title}\n            imageCaption={(() => (\n              <>\n                <div\n                  dangerouslySetInnerHTML={{\n                    __html: images[selectedIndex].desc\n                  }}\n                />\n                {images[selectedIndex].link ? (\n                  <a href={images[selectedIndex].link} target=\"_blank\" rel=\"noopener noreferrer\">מקור</a>\n                ) : null}\n              </>\n            ))()}\n            mainSrc={images[selectedIndex].source}\n            nextSrc={images[(selectedIndex + 1) % images.length].source}\n            prevSrc={\n              images[(selectedIndex + images.length - 1) % images.length]\n                ?.source\n            }\n            onCloseRequest={toggleLightbox}\n            onMovePrevRequest={() =>\n              setSelectedIndex(\n                (selectedIndex + images.length - 1) % images.length\n              )\n            }\n            onMoveNextRequest={() =>\n              setSelectedIndex((selectedIndex + 1) % images.length)\n            }\n          />\n        </div>\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}