{"ast":null,"code":"import { createChildUnitsFunc } from '../utils/createChildUnitsFunc';\nimport { createFamilyFunc } from '../children/create';\nimport { getSpouseNodesFunc } from '../utils/getSpouseNodesFunc';\nimport { setDefaultUnitShift } from '../utils/setDefaultUnitShift';\nimport { prop, withRelType } from '../utils';\nimport { newFamily } from '../utils/family';\nimport { unitsToNodes } from '../utils/units';\nimport { NODES_IN_COUPLE } from '../constants';\nimport { FamilyType, RelType } from '../types';\nimport { correctOverlaps } from './correctOverlaps';\nexport var createFamilyWithoutParents = function createFamilyWithoutParents(store) {\n  var family = newFamily(store.getNextId(), FamilyType.root, true);\n  family.children = createChildUnitsFunc(store)(family.id, store.root);\n  setDefaultUnitShift(family);\n  return [family];\n};\n\nvar getParentIDs = function getParentIDs(root, type) {\n  return root.parents.filter(withRelType(type)).map(prop('id'));\n};\n\nexport var createDiffTypeFamilies = function createDiffTypeFamilies(store) {\n  var createFamily = createFamilyFunc(store);\n  var bloodFamily = createFamily(getParentIDs(store.root, RelType.blood), FamilyType.root, true);\n  var adoptedFamily = createFamily(getParentIDs(store.root, RelType.adopted));\n  correctOverlaps(bloodFamily, adoptedFamily);\n  return [bloodFamily, adoptedFamily];\n};\nexport var createBloodFamilies = function createBloodFamilies(store) {\n  var createFamily = createFamilyFunc(store);\n  var mainFamily = createFamily(store.root.parents.map(prop('id')), FamilyType.root, true);\n  var parents = unitsToNodes(mainFamily.parents);\n\n  if (parents.length === NODES_IN_COUPLE) {\n    var _getSpouseNodesFunc = getSpouseNodesFunc(store)(parents),\n        left = _getSpouseNodesFunc.left,\n        right = _getSpouseNodesFunc.right;\n\n    return [left.map(function (node) {\n      return createFamily([node.id]);\n    }), mainFamily, right.map(function (node) {\n      return createFamily([node.id]);\n    })].flat();\n  }\n\n  return [mainFamily];\n};","map":{"version":3,"sources":["/var/projets/broglie-social-react/sociala-react/node_modules/relatives-tree/lib/middle/create.js"],"names":["createChildUnitsFunc","createFamilyFunc","getSpouseNodesFunc","setDefaultUnitShift","prop","withRelType","newFamily","unitsToNodes","NODES_IN_COUPLE","FamilyType","RelType","correctOverlaps","createFamilyWithoutParents","store","family","getNextId","root","children","id","getParentIDs","type","parents","filter","map","createDiffTypeFamilies","createFamily","bloodFamily","blood","adoptedFamily","adopted","createBloodFamilies","mainFamily","length","left","right","node","flat"],"mappings":"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","sourcesContent":["import { createChildUnitsFunc } from '../utils/createChildUnitsFunc';\nimport { createFamilyFunc } from '../children/create';\nimport { getSpouseNodesFunc } from '../utils/getSpouseNodesFunc';\nimport { setDefaultUnitShift } from '../utils/setDefaultUnitShift';\nimport { prop, withRelType } from '../utils';\nimport { newFamily } from '../utils/family';\nimport { unitsToNodes } from '../utils/units';\nimport { NODES_IN_COUPLE } from '../constants';\nimport { FamilyType, RelType } from '../types';\nimport { correctOverlaps } from './correctOverlaps';\nexport const createFamilyWithoutParents = (store) => {\n    const family = newFamily(store.getNextId(), FamilyType.root, true);\n    family.children = createChildUnitsFunc(store)(family.id, store.root);\n    setDefaultUnitShift(family);\n    return [family];\n};\nconst getParentIDs = (root, type) => (root.parents.filter(withRelType(type)).map(prop('id')));\nexport const createDiffTypeFamilies = (store) => {\n    const createFamily = createFamilyFunc(store);\n    const bloodFamily = createFamily(getParentIDs(store.root, RelType.blood), FamilyType.root, true);\n    const adoptedFamily = createFamily(getParentIDs(store.root, RelType.adopted));\n    correctOverlaps(bloodFamily, adoptedFamily);\n    return [bloodFamily, adoptedFamily];\n};\nexport const createBloodFamilies = (store) => {\n    const createFamily = createFamilyFunc(store);\n    const mainFamily = createFamily(store.root.parents.map(prop('id')), FamilyType.root, true);\n    const parents = unitsToNodes(mainFamily.parents);\n    if (parents.length === NODES_IN_COUPLE) {\n        const { left, right } = getSpouseNodesFunc(store)(parents);\n        return [\n            left.map(node => createFamily([node.id])),\n            mainFamily,\n            right.map(node => createFamily([node.id])),\n        ].flat();\n    }\n    return [mainFamily];\n};\n"]},"metadata":{},"sourceType":"module"}