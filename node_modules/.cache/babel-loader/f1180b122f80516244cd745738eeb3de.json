{"ast":null,"code":"import { Gender, RelType } from '../types';\nimport { relToNode } from '../utils';\n\nconst createRel = function (id) {\n  let type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : RelType.blood;\n  return {\n    id,\n    type\n  };\n};\n\nconst createNode = gender => ({\n  id: `${gender}-ph`,\n  placeholder: true,\n  gender: gender,\n  parents: [],\n  siblings: [],\n  spouses: [],\n  children: []\n});\n\nconst createParents = store => {\n  const father = createNode(Gender.male);\n  const mother = createNode(Gender.female);\n  father.spouses = [createRel(mother.id, RelType.married)];\n  mother.spouses = [createRel(father.id, RelType.married)];\n  return [father, mother].map(node => {\n    node.children = store.root.siblings.concat(createRel(store.root.id));\n    store.nodes.set(node.id, node);\n    return createRel(node.id);\n  });\n};\n\nconst setParents = parents => node => node.parents = parents.slice();\n\nexport const placeholders = store => {\n  if (!store.root.parents.length) {\n    const setParentsTo = setParents(createParents(store));\n    setParentsTo(store.root);\n    store.root.siblings.map(relToNode(store)).forEach(setParentsTo);\n  }\n\n  return store;\n};","map":{"version":3,"sources":["/var/projets/broglie-social-react/sociala-react/node_modules/relatives-tree/lib/middle/placeholders.js"],"names":["Gender","RelType","relToNode","createRel","id","type","blood","createNode","gender","placeholder","parents","siblings","spouses","children","createParents","store","father","male","mother","female","married","map","node","root","concat","nodes","set","setParents","slice","placeholders","length","setParentsTo","forEach"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,OAAjB,QAAgC,UAAhC;AACA,SAASC,SAAT,QAA0B,UAA1B;;AACA,MAAMC,SAAS,GAAG,UAACC,EAAD;AAAA,MAAKC,IAAL,uEAAYJ,OAAO,CAACK,KAApB;AAAA,SAA+B;AAAEF,IAAAA,EAAF;AAAMC,IAAAA;AAAN,GAA/B;AAAA,CAAlB;;AACA,MAAME,UAAU,GAAIC,MAAD,KAAa;AAC5BJ,EAAAA,EAAE,EAAG,GAAEI,MAAO,KADc;AAE5BC,EAAAA,WAAW,EAAE,IAFe;AAG5BD,EAAAA,MAAM,EAAEA,MAHoB;AAI5BE,EAAAA,OAAO,EAAE,EAJmB;AAK5BC,EAAAA,QAAQ,EAAE,EALkB;AAM5BC,EAAAA,OAAO,EAAE,EANmB;AAO5BC,EAAAA,QAAQ,EAAE;AAPkB,CAAb,CAAnB;;AASA,MAAMC,aAAa,GAAIC,KAAD,IAAW;AAC7B,QAAMC,MAAM,GAAGT,UAAU,CAACP,MAAM,CAACiB,IAAR,CAAzB;AACA,QAAMC,MAAM,GAAGX,UAAU,CAACP,MAAM,CAACmB,MAAR,CAAzB;AACAH,EAAAA,MAAM,CAACJ,OAAP,GAAiB,CAACT,SAAS,CAACe,MAAM,CAACd,EAAR,EAAYH,OAAO,CAACmB,OAApB,CAAV,CAAjB;AACAF,EAAAA,MAAM,CAACN,OAAP,GAAiB,CAACT,SAAS,CAACa,MAAM,CAACZ,EAAR,EAAYH,OAAO,CAACmB,OAApB,CAAV,CAAjB;AACA,SAAO,CAACJ,MAAD,EAASE,MAAT,EAAiBG,GAAjB,CAAqBC,IAAI,IAAI;AAChCA,IAAAA,IAAI,CAACT,QAAL,GAAgBE,KAAK,CAACQ,IAAN,CAAWZ,QAAX,CAAoBa,MAApB,CAA2BrB,SAAS,CAACY,KAAK,CAACQ,IAAN,CAAWnB,EAAZ,CAApC,CAAhB;AACAW,IAAAA,KAAK,CAACU,KAAN,CAAYC,GAAZ,CAAgBJ,IAAI,CAAClB,EAArB,EAAyBkB,IAAzB;AACA,WAAOnB,SAAS,CAACmB,IAAI,CAAClB,EAAN,CAAhB;AACH,GAJM,CAAP;AAKH,CAVD;;AAWA,MAAMuB,UAAU,GAAIjB,OAAD,IAAeY,IAAD,IAAUA,IAAI,CAACZ,OAAL,GAAeA,OAAO,CAACkB,KAAR,EAA1D;;AACA,OAAO,MAAMC,YAAY,GAAId,KAAD,IAAW;AACnC,MAAI,CAACA,KAAK,CAACQ,IAAN,CAAWb,OAAX,CAAmBoB,MAAxB,EAAgC;AAC5B,UAAMC,YAAY,GAAGJ,UAAU,CAACb,aAAa,CAACC,KAAD,CAAd,CAA/B;AACAgB,IAAAA,YAAY,CAAChB,KAAK,CAACQ,IAAP,CAAZ;AACAR,IAAAA,KAAK,CAACQ,IAAN,CAAWZ,QAAX,CACKU,GADL,CACSnB,SAAS,CAACa,KAAD,CADlB,EAEKiB,OAFL,CAEaD,YAFb;AAGH;;AACD,SAAOhB,KAAP;AACH,CATM","sourcesContent":["import { Gender, RelType } from '../types';\nimport { relToNode } from '../utils';\nconst createRel = (id, type = RelType.blood) => ({ id, type });\nconst createNode = (gender) => ({\n    id: `${gender}-ph`,\n    placeholder: true,\n    gender: gender,\n    parents: [],\n    siblings: [],\n    spouses: [],\n    children: [],\n});\nconst createParents = (store) => {\n    const father = createNode(Gender.male);\n    const mother = createNode(Gender.female);\n    father.spouses = [createRel(mother.id, RelType.married)];\n    mother.spouses = [createRel(father.id, RelType.married)];\n    return [father, mother].map(node => {\n        node.children = store.root.siblings.concat(createRel(store.root.id));\n        store.nodes.set(node.id, node);\n        return createRel(node.id);\n    });\n};\nconst setParents = (parents) => ((node) => node.parents = parents.slice());\nexport const placeholders = (store) => {\n    if (!store.root.parents.length) {\n        const setParentsTo = setParents(createParents(store));\n        setParentsTo(store.root);\n        store.root.siblings\n            .map(relToNode(store))\n            .forEach(setParentsTo);\n    }\n    return store;\n};\n"]},"metadata":{},"sourceType":"module"}